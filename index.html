<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trinity Engine V10.2.8.4 - MARKET SHADOW-CENTER</title>
    <style>
        :root {
            --matrix-green: #00ff41;
            --icbc-blue: #005495;
            --danger-red: #ff0000;
            --void-black: #0d0208;
            --terminal-gray: #1a1a1a;
            --kinetic-cyan: #0ff;
            --kraken-purple: #5841d8;
        }

        *, *::before, *::after { box-sizing: border-box; }

        body, html {
            background-color: var(--void-black);
            color: var(--matrix-green);
            font-family: 'Courier New', Courier, monospace;
            margin: 0; padding: 0; height: 100vh; overflow: hidden;
            display: flex; justify-content: center; align-items: center;
        }

        canvas#matrix { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; opacity: 0.25; pointer-events: none; }

        #security-lock {
            width: 450px; padding: 50px; border: 3px solid var(--matrix-green);
            background: rgba(0, 0, 0, 0.98); box-shadow: 0 0 50px rgba(0, 255, 65, 0.4);
            text-align: center; z-index: 1000;
        }

        #main-interface {
            display: none; width: 95%; max-width: 1400px; height: 94vh;
            border: 2px solid var(--matrix-green); padding: 30px 40px;
            background: rgba(13, 2, 8, 0.95); box-shadow: 0 0 30px var(--matrix-green);
            overflow-y: auto; overflow-x: hidden; scroll-behavior: smooth;
        }

        header { text-align: center; border-bottom: 2px solid var(--matrix-green); padding-bottom: 20px; margin-bottom: 40px; }

        .tier { margin-bottom: 60px; padding-bottom: 40px; border-bottom: 2px dashed rgba(0, 255, 65, 0.3); }
        .tier-header { font-size: 1.4rem; color: #fff; letter-spacing: 5px; margin-bottom: 25px; text-shadow: 0 0 10px var(--matrix-green); text-align: center; }

        .tier-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .panel { border: 1px solid var(--matrix-green); padding: 25px; background: rgba(20, 20, 20, 0.6); display: flex; flex-direction: column; gap: 15px; }

        input, select { background: #000; border: 1px solid #333; color: var(--matrix-green); padding: 15px; font-family: inherit; font-size: 1rem; width: 100%; }

        button { background: var(--matrix-green); color: #000; border: none; padding: 15px; font-weight: bold; text-transform: uppercase; cursor: pointer; letter-spacing: 2px; }
        button:hover { background: #fff; box-shadow: 0 0 20px #fff; }

        .market-panel { border: 1px solid var(--kraken-purple); box-shadow: 0 0 15px var(--kraken-purple); }
        .market-header { color: var(--kraken-purple); font-weight: bold; border-left: 4px solid var(--kraken-purple); padding-left: 10px; }

        .telemetry-readout { display: flex; justify-content: space-between; font-size: 0.9rem; color: var(--kinetic-cyan); background: #050505; padding: 15px; border: 1px solid var(--kinetic-cyan); }
        #audit-log { height: 200px; background: #000; border: 1px solid var(--matrix-green); padding: 15px; font-size: 0.9rem; overflow-y: auto; margin-top: 10px; }

        .glitch { animation: glitch 2s infinite; }
        @keyframes glitch { 0% { opacity: 1; } 50% { opacity: 0.7; } 100% { opacity: 1; } }
    </style>
</head>
<body>

<canvas id="matrix"></canvas>

<div id="security-lock">
    <div class="glitch" style="font-size: 1.8rem; letter-spacing: 8px; margin-bottom: 30px;">ACCESS RESTRICTED</div>
    <input type="text" id="access-id" placeholder="ARCHITECT ACCESS ID" style="margin-bottom: 15px; text-align: center;">
    <input type="password" id="protocol-key" placeholder="PROTOCOL SECURITY KEY" style="margin-bottom: 25px; text-align: center;">
    <button onclick="unlock()">INITIALIZE SHADOW-CENTER</button>
</div>

<div id="main-interface">
    <header>
        <h1 style="margin: 0; letter-spacing: 10px;">TRINITY ENGINE V10.2.8.4</h1>
        <div style="font-size: 0.9rem; color: #fff; margin-top: 5px;">SIU AUDIT SUITE // CDM MARKET ALGORITHM // KRAKEN API LINK</div>
    </header>

    <div class="tier" id="tier-1">
        <h2 class="tier-header">TIER I : CORE INITIATION & TELEMETRY</h2>
        <div class="tier-grid">
            <div class="panel">
                <h2>CLAIM INITIATION</h2>
                <input type="text" id="case-id" placeholder="CLAIM ID" oninput="calculateProbability()">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <button id="voice-btn" onclick="toggleVoice()">VOICE CAPTURE</button>
                    <button onclick="addLog('EXTERNAL AUDIT ACTIVE...')">EXTERNAL AUDIT</button>
                </div>
            </div>
            <div class="panel">
                <h2>KINETIC PHYSICS</h2>
                <div style="display: flex; gap: 10px;">
                    <input type="number" id="velocity" placeholder="KM/H" oninput="updatePhysics()">
                    <input type="number" id="impact" placeholder="G-FORCE" oninput="updatePhysics()">
                </div>
                <div class="telemetry-readout">
                    <span>[ VEL: <span id="vel-out">000</span> ]</span>
                    <span>[ G-FORCE: <span id="imp-out">00.0</span> ]</span>
                </div>
            </div>
        </div>
    </div>

    <div class="tier" id="tier-3">
        <h2 class="tier-header">TIER III : ADJUDICATION & MARKET VAULT</h2>
        <div class="tier-grid">
            <div class="panel">
                <h2>VAULT ADJUDICATION</h2>
                <input type="number" id="cash" placeholder="RECOVERY TARGET ($)" oninput="calculateProbability()">
                <select id="assess" onchange="calculateProbability()">
                    <option value="none">-- ASSESSMENT --</option>
                    <option value="verified">VERIFIED CREDIBLE</option>
                    <option value="adverse">ADVERSE</option>
                </select>
                <button onclick="commitVault()">SEAL JUDGMENT</button>
                <div id="judgment-display" style="display:none; padding:10px; border:1px solid #0f0; margin-top:10px; font-size:0.8rem;"></div>
            </div>

            <div class="panel market-panel">
                <h2 class="market-header">KRAKEN CDM EXECUTION</h2>
                <div style="display: flex; gap: 5px;">
                    <input type="text" id="kraken-key" placeholder="KRAKEN API KEY" style="font-size:0.8rem; border-color:var(--kraken-purple);">
                    <input type="password" id="kraken-secret" placeholder="API SECRET" style="font-size:0.8rem; border-color:var(--kraken-purple);">
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <select id="asset-pair">
                        <option value="XBTUSD">BTC / USD</option>
                        <option value="ETHUSD">ETH / USD</option>
                    </select>
                    <input type="number" id="trade-size" placeholder="UNITS">
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <button style="background:var(--matrix-green);" onclick="executeMarket('buy')">MARKET BUY</button>
                    <button style="background:var(--danger-red); color:#fff;" onclick="executeMarket('sell')">MARKET SELL</button>
                </div>
            </div>
        </div>
        <div id="audit-log">> TRZ-7789 MARKET PROTOCOL READY.</div>
    </div>
</div>

<script>
    // --- LOGIN & MATRIX ---
    window.onload = function() { startMatrix(); };
    function unlock() {
        const id = document.getElementById('access-id').value.toUpperCase();
        const key = document.getElementById('protocol-key').value;
        if(id === "TY-ARCHITECT-01" && key === "TRZ-7789-APEX") {
            document.getElementById('security-lock').style.display = 'none';
            document.getElementById('main-interface').style.display = 'block';
        }
    }

    // --- MARKET EXECUTION (KRAKEN CDM) ---
    async function executeMarket(side) {
        const key = document.getElementById('kraken-key').value;
        const secret = document.getElementById('kraken-secret').value;
        const pair = document.getElementById('asset-pair').value;
        const vol = document.getElementById('trade-size').value;

        if(!key || !secret || !vol) {
            addLog("<span style='color:orange'>MARKET ERROR: MISSING KRAKEN CREDENTIALS OR VOLUME.</span>");
            return;
        }

        addLog(`INITIALIZING CDM ${side.toUpperCase()} ORDER: ${vol} ${pair}...`);
        
        // Simulation of the CDM Logic before the API call
        setTimeout(() => {
            addLog(`SIGNAL VERIFIED. EXECUTING VIA KRAKEN SHADOW-GATE...`);
            // Note: Direct fetch would go here. For now, we simulate success to verify layout.
            addLog(`<span style='color:var(--kraken-purple)'>ORDER PLACED: ${side.toUpperCase()} ${vol} ${pair} AT MARKET.</span>`);
        }, 1200);
    }

    // --- CORE LOGIC (NO STRIPPING) ---
    function addLog(m) {
        const l = document.getElementById('audit-log');
        l.innerHTML += `<br>> ${m}`;
        l.scrollTop = l.scrollHeight;
    }

    function calculateProbability() {
        let score = 0;
        if(document.getElementById('case-id').value) score += 20;
        if(document.getElementById('velocity').value) score += 20;
        if(document.getElementById('assess').value === 'verified') score += 60;
        return score;
    }

    function updatePhysics() {
        const v = document.getElementById('velocity').value;
        const g = document.getElementById('impact').value;
        document.getElementById('vel-out').innerText = v ? v.padStart(3, '0') : '000';
        document.getElementById('imp-out').innerText = g ? parseFloat(g).toFixed(1).padStart(4, '0') : '00.0';
    }

    function commitVault() {
        const score = calculateProbability();
        const display = document.getElementById('judgment-display');
        display.style.display = "block";
        display.innerHTML = `<strong>REALITY LOCK: ${score}%</strong><br>CDM MARKET SIGNAL: ${score > 80 ? 'READY' : 'WAITING'}`;
        addLog("VAULT SEALED. MARKET SIGNAL GENERATED.");
    }

    function startMatrix() {
        const canvas = document.getElementById('matrix');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        const chars = "1010101TRINITY7789APEX";
        const drops = Array(Math.floor(canvas.width/18)).fill(1);
        function draw() {
            ctx.fillStyle = "rgba(0,0,0,0.05)"; ctx.fillRect(0,0,canvas.width,canvas.height);
            ctx.fillStyle = "#0F0"; ctx.font = "15px monospace";
            drops.forEach((y, i) => {
                ctx.fillText(chars[Math.floor(Math.random()*chars.length)], i*18, y*18);
                if(y*18 > canvas.height && Math.random() > 0.975) drops[i] = 0;
                drops[i]++;
            });
        }
        setInterval(draw, 50);
    }
</script>
</body>
</html>

